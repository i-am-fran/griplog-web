<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Griplog URL Preview Test</title>
		<link rel="stylesheet" href="css/styles.css" />
		<style>
			.test-container {
				max-width: 800px;
				margin: 4rem auto;
				padding: 2rem;
			}

			.test-card {
				background: rgba(255, 255, 255, 0.05);
				border-radius: 12px;
				padding: 2rem;
				margin-bottom: 1.5rem;
			}

			.test-url {
				background: rgba(0, 0, 0, 0.3);
				padding: 1rem;
				border-radius: 8px;
				font-family: monospace;
				font-size: 0.875rem;
				word-break: break-all;
				margin: 1rem 0;
			}

			.test-button {
				display: inline-block;
				padding: 0.75rem 1.5rem;
				background: #007aff;
				color: white;
				text-decoration: none;
				border-radius: 8px;
				font-weight: 600;
				margin-right: 1rem;
				margin-bottom: 0.5rem;
			}

			.test-button:hover {
				opacity: 0.8;
			}

			.success {
				color: #34c759;
			}

			.info {
				color: #5ac8fa;
			}
		</style>
	</head>
	<body>
		<div class="test-container">
			<h1>Griplog URL Preview Test</h1>

			<div class="test-card">
				<h2>Test Case 1: Simple Boulder Route</h2>
				<p>A basic boulder problem with minimal metadata.</p>
				<div class="test-url" id="test1-url">Generating URL...</div>
				<a href="#" id="test1-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test1-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2>Test Case 2: Sport Climb with Location</h2>
				<p>A sport route with location, height, and bolt count.</p>
				<div class="test-url" id="test2-url">Generating URL...</div>
				<a href="#" id="test2-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test2-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2>Test Case 3: Full Route Data</h2>
				<p>A route with all optional fields populated.</p>
				<div class="test-url" id="test3-url">Generating URL...</div>
				<a href="#" id="test3-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test3-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2>Test Case 4: Outdoor Crag Location</h2>
				<p>An outdoor climbing location with GPS coordinates and stone types.</p>
				<div class="test-url" id="test4-url">Generating URL...</div>
				<a href="#" id="test4-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test4-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2>Test Case 5: Indoor Gym Location</h2>
				<p>An indoor climbing gym with address and website.</p>
				<div class="test-url" id="test5-url">Generating URL...</div>
				<a href="#" id="test5-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test5-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2>Test Case 6: Complete Location Data</h2>
				<p>A location with all optional fields populated including parking coordinates.</p>
				<div class="test-url" id="test6-url">Generating URL...</div>
				<a href="#" id="test6-link" class="test-button" target="_blank"
					>Test This Link</a
				>
				<button
					onclick="copyToClipboard('test6-url')"
					class="test-button"
					style="background: #5856d6"
				>
					Copy URL
				</button>
			</div>

			<div class="test-card">
				<h2 class="info">How It Works</h2>
				<ol style="line-height: 1.8">
					<li>User clicks "Share" in Griplog app</li>
					<li>
						App generates a web URL: <code>https://griplog.app/preview?url=...</code>
					</li>
					<li>User shares this URL in WhatsApp, Messages, etc.</li>
					<li>
						Recipient clicks the link → Opens <code>preview.html</code> in browser
					</li>
					<li>Page shows route details with "Add to Griplog" button</li>
					<li>
						User clicks "Add to Griplog" → iOS opens Griplog app with route data
					</li>
				</ol>
			</div>

			<div class="test-card">
				<h2 class="success">✓ Expected Behavior</h2>
				<ul style="line-height: 1.8">
					<li>
						<strong>Preview page loads:</strong> Shows route details (grade, sport,
						name, location, etc.)
					</li>
					<li>
						<strong>Click "Add to Griplog":</strong> Opens Griplog app with route
						import preview
					</li>
					<li>
						<strong>Without app:</strong> Shows "Explore Griplog" link and app info
					</li>
					<li>
						<strong>Social sharing:</strong> Link preview shows route name and grade
					</li>
				</ul>
			</div>
		</div>

		<footer class="footer">
			<p>
				© 2025 • Griplog • <a href="/">Home</a> •
				<a href="/changelog">Changelog</a> •
				<a href="/url-builder">URL Builder</a>
			</p>
		</footer>

		<script>
			// Generate test URLs
			const testCases = {
				test1: {
					name: "Crimpy Problem",
					grade: "7B",
					sport: "bouldering",
				},
				test2: {
					name: "Golden Ticket",
					grade: "7c",
					sport: "sport",
					location: "Red River Gorge",
					height: "25",
					bolts: "9",
				},
				test3: {
					name: "Biographie",
					grade: "9a+",
					sport: "sport",
					location: "Céüse",
					area: "Secteur Biographie",
					height: "50",
					bolts: "15",
					angle: "overhang",
					lat: "44.5167",
					lon: "5.9333",
				},
				test4: {
					type: "location",
					name: "Yosemite Valley",
					accessType: "outdoor",
					sportType: "trad",
					country: "USA",
					region: "California",
					lat: "37.7456",
					lon: "-119.5933",
					stoneTypes: "granite",
				},
				test5: {
					type: "location",
					name: "Brooklyn Boulders",
					accessType: "indoor",
					sportType: "bouldering",
					address: "575 Degraw St, Brooklyn, NY",
					website: "https://brooklynboulders.com",
				},
				test6: {
					type: "location",
					name: "Red River Gorge",
					accessType: "outdoor",
					sportType: "sport",
					country: "USA",
					region: "Kentucky",
					area: "PMRP",
					lat: "37.7456",
					lon: "-83.6831",
					parkingLat: "37.7450",
					parkingLon: "-83.6840",
					stoneTypes: "sandstone,limestone",
					website: "https://www.redriverclimbing.com",
				},
			};

			function generateWebPreviewURL(params) {
				// Create URL with direct route parameters
				const queryString = Object.entries(params)
					.map(([key, value]) => `${key}=${encodeURIComponent(value)}`)
					.join("&");
				return `https://griplog.app/preview?${queryString}`;
			}

			// Generate URLs for all test cases
			Object.keys(testCases).forEach((testId) => {
				const params = testCases[testId];
				const webPreviewURL = generateWebPreviewURL(params);

				// Display URL
				document.getElementById(`${testId}-url`).textContent = webPreviewURL;

				// Set link href
				document.getElementById(`${testId}-link`).href = webPreviewURL;
			});

			// Copy to clipboard function
			function copyToClipboard(elementId) {
				const text = document.getElementById(elementId).textContent;
				navigator.clipboard
					.writeText(text)
					.then(() => {
						alert("URL copied to clipboard!");
					})
					.catch((err) => {
						console.error("Failed to copy:", err);
					});
			}
		</script>
	</body>
</html>
